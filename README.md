
# AI-Taro — интерактивная AI-гадалка на Toro

**Сайт проекта:** [ai-taro-astro.ru](https://ai-taro-astro.ru)  

**Кратко:**  
AI-Taro — веб-приложение для интерактивного гадания по картам Taro. В проекте реализован интеллектуальный агент (AI-агент) на базе LangGraph и AI-LangChain, который умеет: делать расклады, отрисовывать карты и генерировать натальную карту. Взаимодействие с API организовано через OpenRouter. Для картографии/логики раскладов используется MCP-сервер; натальная карта — отдельный MCP-эндпоинт. Интерфейс — современный FrontEnd (реализован с использованием Streamlit), а FastAPI служит мостом для передачи состояния AI-агента в реальном времени на фронтенд.

---

## Основные возможности
- Регистрация / аутентификация пользователей на сайте.
- AI-агент (LangGraph + AI-LangChain):
  - генерация раскладов по картам Taro;
  - визуализация/отрисовка карт и раскладов;
  - построение натальной карты (через MCP-сервер).
- Все внешние LLM/AI-запросы и API проксируются через OpenRouter.
- MCP-сервер(ы) для бизнес-логики карт и натальной карты.
- FrontEnd на Streamlit получает и отображает состояния агента в реальном времени.
- FastAPI выступает как backend: маршруты, WebSocket/Server-sent events для потоковой передачи состояний агента на FrontEnd.
- Рабочий сайт: [ai-taro-astro.ru](https://ai-taro-astro.ru)

---

## Архитектура (вкратце)
```
[User Browser]  <-->  [FrontEnd (StreamReader)]  <-->  [FastAPI Backend]
                                                   |
                                      +------------+-------------+
                                      |                          |
                              [AI-Agent (LabGraph + AI-LandChain)] 
                                      |
                              MCP-server (карты Toro)  <--->  MCP-server (натальная карта)
                                      |
                              OpenRouter (проксирование всех внешних API/LLM)
```

- **FrontEnd** — UI, регистрация, логин, визуализация раскладов и натальной карты. Подписан на события FastAPI (WebSocket / SSE) для получения состояний AI-агента.
- **FastAPI** — REST + real-time (WS/SSE). Получает команды от FrontEnd, делегирует их AI-агенту, отправляет статусы назад.
- **AI-Agent** — главный модуль логики (LangGraph + AI-LangChain). Отвечает за генерацию раскладов, интерактивные сессии и подготовку графики/метаданных.
- **MCP-server**(ы) — microservices (карты Taro и натальная карта). Обрабатывают специализированную логику/калькуляции карт.
- **OpenRouter** — единый шлюз для всех внешних AI/LLM вызовов (аутентификация, маршрутизация запросов к внешним моделям).

---

## Технологии
- Backend: **FastAPI**, Python
- AI-агент: **LangGraph**, **AI-LangChain** (встроенная логика и пайплайны)
- MCP: собственные MCP-серверы для карт и натальной карты
- API gateway: **OpenRouter**
- Frontend: **Streamlit** (UI/визуализация)
- Доп.: Docker / docker-compose (рекомендуется для локальной разработки)

---
